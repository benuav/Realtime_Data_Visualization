
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="description" content="A highly customizable CSS button library.">
  <meta name="viewport" content="width=device-width">

  <!-- UNICORN CSS STYLES -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css">
  <link rel="stylesheet" href="../css/showcase.css">
  <link rel="stylesheet" href="../css/buttons.css">
  <link rel="stylesheet" href="../css/grids.css">


    <link rel="stylesheet" href="../css/gauge.css">


    <title>Sugarcane AI System Interface</title>
</head>

 

    <body>
            <!-- NAV -->
  <div class="button-group">
    <a type="button" class="button button-primary" href="index.html" >Home </a>
    <a type="button" class="button button-primary" href="gaugeView.html" >Gauge </a>
    <a type="button" class="button button-primary" href="mapView.html" >Map</a>
    <a type="button" class="button button-primary" href="setView.html" >Setting</a>
  </div>

        <h1>Prototype No.1</h1>

        <div class="gauge">
            <div class="gauge__body">
              <div class="gauge__fill"></div>
              <div class="gauge__cover">15</div>
           </div>
        </div>
       


        <script>
            

            const gaugeElement = document.querySelector(".gauge");
            
            function setGaugeValue(gauge, value){
                if (value < 0 || value > 15){
                    return;
                }
                gauge.querySelector(".gauge__fill").style.transform = `rotate(${value / 30}turn`;
               /* gauge.querySelector(".gauge__cover").textContent = `${Math.round(value * 100)}%`;*/
                gauge.querySelector(".gauge__cover").textContent = `${(value)}`;
            }



            var a = [];
            setInterval(getData, 1000) // run get Data function every 1 second
            //getData();

            
            async function getData(){
                const response = await fetch('../data/data.csv');
                const data = await response.text();
                //console.log(data);

                const rows = data.split('\n').slice(1);
                rows.forEach(elt => {
                    const row = elt.split(',');
                    const number = row[4];

                    a.push(number);
                //   console.log(a);   

                ///   console.log(row);
                    //console.log(number);
                ///  setGaugeValue(gaugeElement, number);
                });
               // console.log("this is number", a); // the var a must within the getDATA FUCNITON 
                var lastItem = a[a.length -2]; //choose the last number to display
                console.log("this is last item", lastItem);
                setGaugeValue(gaugeElement, lastItem); // run setGauge when eachtime get the data.
            //    setTimeout (setGaugeValue(gaugeElement, lastItem), 3000);
                /// console.log(rows);
            };

            



        </script>



    </body>
</html>
