<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" >
    <link rel="stylesheet" href="../css/map.css" type="text/css" media="screen" >


        <title>Google Map</title>

</head>

    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="map_1.html">Map 1</a></li>
        <li><a href="map_2.html">Map 2</a></li>
        <li><a href="gauge_1.html">Gauge 1</a></li>
        <li><a href="gauge_2.html">Gauge 2</a></li>
        <li><a href="gauge_3.html">Gauge 3</a></li>
    </ul>


    <body>


        <script>// <- fitch data from data.csv

            function initMap() { // set the google map
                var location = {lat: -27.552510, lng: 153.053180} // set the location var
                var map = new google.maps.Map(document.getElementById("map"), { // set the map itself
                    zoom: 20,
                    center: location
                });
    
                var marker = new google.maps.Marker({ // <- give a marker on the map
                    position: location,
                    map: map
                })


                
                /*
                var rectangle = new google.maps.Rectangle ({
                    map: map,
                    bounds: new google.maps.LatLngBounds (
                        new google.maps.LatLng (location),
                        new google.maps.LatLng (-27.552520,153.053370)
                    ),
                    fillColor: "red",
                    strokeColor: "white"   
                }) ;

                var rectangle_2 = new google.maps.Rectangle ({
                    map: map,
                    bounds: new google.maps.LatLngBounds (
                        new google.maps.LatLng (-27.552510,153.053365),
                        new google.maps.LatLng (-27.552520,153.053375)
                    ),
                    fillColor: "red",
                    strokeColor: "white"   
                   
                }) ;
                */
            
                
            

//<---manual data input from here:-----------------------------------------------

            var csvData = [
                "0,2021-04-19 14:03:32.972912,-27.55251,153.05336,8", 
                "1,2021-04-19 14:03:32.974178,-27.55251,153.05334,8", 
                "2,2021-04-19 14:03:33.978594,-27.55251,153.05331999999999,8", 
                "3,2021-04-19 14:03:34.982450,-27.55251,153.05329999999998,5",
                "4,2021-04-19 14:03:35.987714,-27.55251,153.05327999999997,5", 
                "5,2021-04-19 14:03:36.992714,-27.55251,153.05325999999997,4", 
                "6,2021-04-19 14:03:37.997645,-27.55251,153.05323999999996,10", 
                "7,2021-04-19 14:03:39.002720,-27.55251,153.05321999999995,13", 
                "8,2021-04-19 14:03:40.008056,-27.55251,153.05319999999995,8", 
                "9,2021-04-19 14:03:41.012557,-27.55251,153.05317999999994,9", 
                "10,2021-04-19 14:03:42.017723,-27.55251,153.05315999999993,7", 
                "11,2021-04-19 14:03:43.022815,-27.55251,153.05313999999993,9", 
                "12,2021-04-19 14:03:44.028037,-27.55251,153.05311999999992,4", 
                "13,2021-04-19 14:03:45.032392,-27.55251,153.05309999999992,8", 
                "14,2021-04-19 14:03:46.037677,-27.55251,153.0530799999999,9", 
                "15,2021-04-19 14:03:47.042739,-27.55251,153.0530599999999,11", 
                "16,2021-04-19 14:03:48.047154,-27.55251,153.0530399999999,7", 
                "17,2021-04-19 14:03:49.052593,-27.55251,153.0530199999999,10", 
                "18,2021-04-19 14:03:50.053503,-27.55251,153.05299999999988,6", 
                "19,2021-04-19 14:03:51.058698,-27.55251,153.05297999999988,7", 
                "20,2021-04-19 14:03:52.063526,-27.55251,153.05295999999987,7", 
                "21,2021-04-19 14:03:53.068657,-27.55251,153.05293999999986,6", 
                "22,2021-04-19 14:03:54.070392,-27.55251,153.05291999999986,9",
            ]
                /* short example:
                [
                "0,2021-04-09 23:38:15.145340,-27.55251,153.05336,8", 
                "1,2021-04-09 23:38:15.145749,-27.55253,153.05336,10", 
                "2,2021-04-09 23:38:16.147035,-27.55255,153.05336,6"]
                */

//<------ clean the data with geo location only------------------------------
            var pos = [];
            csvData.forEach(elt => {                   // <- run for each function in each rows
                const row = elt.split(',');         //<- split the row data into array
                //console.log(row);
                const lat = row[2]; //<- fitch lat from rows
                const lng = row[3];
                    //console.log('lat is:',lat,"lng is:",lng)
                console.log('first element',twoPost(lat,lng)[0])
                console.log('second element',twoPost(lat,lng)[1])
                console.log('third element',twoPost(lat,lng)[2])
                console.log('fourth element',twoPost(lat,lng)[3])
                var firstElement = twoPost(lat,lng)[0];
                var secondElement = twoPost(lat,lng)[1];
                var thirdElement = twoPost(lat,lng)[2];
                var fourthElement = twoPost(lat,lng)[3];



                //<- rectangle loop from here:-----------------------


                var rectangle = new google.maps.Rectangle ({
                    map: map,
                    bounds: new google.maps.LatLngBounds (
                        new google.maps.LatLng (firstElement, secondElement),
                        new google.maps.LatLng (thirdElement, fourthElement)
                    ),
                    fillColor: "red",
                    strokeColor: "white"   
                }) ;

            });




//<- function that convert one point GEO location into two point
            function twoPost (latt,lngg) {
                var sizeOfRectangle = 0.000025
                var lat = latt
                var lng = lngg
                var newlat = lat - sizeOfRectangle
                var newLng = lng - (-sizeOfRectangle)
                //console.log('lag:', lat, ',lng:',lng)
                //console.log('new lag:', newLag, ',new lng:',newLng)
                return firstPost = [lat,lng, newlat, newLng]
            };




            //Google Maps API guide: https://developers.google.com/maps/do...â€‹
            //Find your latitude and logitude: http://www.latlong.net/â€‹
        }
        </script>

        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDJiAa3qQ4LuPAws9B7yErrDTYwwWWwW0E&&callback=initMap"type="text/javascript">// <- set google map API</script>
        
        <div id="map"></div>
        <div id=''></div>


    </body>
</html>
