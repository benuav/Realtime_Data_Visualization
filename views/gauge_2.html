<!DOCTYPE html>
<html>


  <head>
    <title>Sugarcane AI System Interface</title>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <link rel="stylesheet" href="../css/g2_gauge.css">
    <link rel="stylesheet" href="../css/g2_style.css">
    

</head>


  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="map_2.html">Google Map</a></li>
    <li><a href="map_1.html">Map Box</a></li>
    <li><a href="gauge_1.html">Prototype 1</a></li>
    <li><a href="gauge_2.html">prototype 2</a></li>
    <li><a href="gauge_3.html">prototype 3</a></li>
  </ul>

  <body>
    <body>
      <audio id="myAudio0">
          <source src="../src/sounds/0.wav" type="audio/ogg">
          <source src="../src/sounds/0.wav" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <audio id="myAudio1">
          <source src="../src/sounds/1.wav" type="audio/ogg">
          <source src="../src/sounds/1.wav" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <audio id="myAudio2">
          <source src="../src/sounds/2.wav" type="audio/ogg">
          <source src="../src/sounds/2.wav" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <audio id="myAudio3">
          <source src="../src/sounds/3.wav" type="audio/ogg">
          <source src="../src/sounds/3.wav" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <audio id="myAudio4">
          <source src="../src/sounds/4.wav" type="audio/ogg">
          <source src="../src/sounds/4.wav" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <audio id="myAudio5">
          <source src="../src/sounds/5.wav" type="audio/ogg">
          <source src="../src/sounds/5.wav" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <audio id="myAudio6">
          <source src="../src/sounds/6.wav" type="audio/ogg">
          <source src="../src/sounds/6.wav" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <audio id="myAudio7">
          <source src="../src/sounds/7.wav" type="audio/ogg">
          <source src="../src/sounds/7.wav" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <audio id="myAudio8">
          <source src="../src/sounds/8.wav" type="audio/ogg">
          <source src="../src/sounds/8.wav" type="audio/mpeg">
          Your browser does not support the audio element.
          <audio id="myAudioA">
              <source src="../src/sounds/alert.mp3" type="audio/ogg">
              <source src="../src/sounds/alert.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
        </audio>
        
        
      <h1>Prototype No.2</h1>
      

      <div class="gauge">
          <div class="gauge__body">
            <div class="gauge__fill"></div>
            <div class="gauge__cover"></div>
            
            
         </div>
         <div class="gauge__previous"></div>
      </div>
     


      <script>
          

          const gaugeElement = document.querySelector(".gauge");


          function previousGaugeValue(gauge, value){
              if (value < 0 || value > 15){
                  return;
              
              }
              gauge.querySelector(".gauge__previous").textContent = `Previous Value: ${(value)}`;
          }
          
          function setGaugeValue(gauge, value){
              if (value < 0 || value > 15){
                  return;
              }
              
              
              
              gauge.querySelector(".gauge__fill").style.left= `${value* 20}px`;
             /* gauge.querySelector(".gauge__cover").textContent = `${Math.round(value * 100)}%`;*/
              gauge.querySelector(".gauge__cover").textContent = `${(value)}`;
              gauge.querySelector(".gauge__cover").style.left= `${value* 20}px`;
          }

          document.getElementById("myAudio0").loop = false;
          document.getElementById("myAudio1").loop = false;
          document.getElementById("myAudio2").loop = false;
          document.getElementById("myAudio3").loop = false;
          document.getElementById("myAudio4").loop = false;
          document.getElementById("myAudio5").loop = false;
          document.getElementById("myAudio6").loop = false;
          document.getElementById("myAudio7").loop = false;
          document.getElementById("myAudio8").loop = false;
          document.getElementById("myAudioA").loop = false;

          var j = document.getElementById("myAudio0");
          var b = document.getElementById("myAudio1");
          var c = document.getElementById("myAudio2");
          var d = document.getElementById("myAudio3");
          var e = document.getElementById("myAudio4");
          var f = document.getElementById("myAudio5");
          var g = document.getElementById("myAudio6");
          var h = document.getElementById("myAudio7");
          var i = document.getElementById("myAudio8");
          var k = document.getElementById("myAudioA");


          function playAudio(value) {
              if (value == 0) {
                  j.play(); 
              }else if (value == 1){
                  b.play();
              }else if (value == 2){
                  c.play();
              }else if (value == 3){
                  d.play();
              }else if (value == 4){
                  e.play();
              }else if (value == 5){
                  f.play();
              }else if (value == 6){
                  g.play();
              }else if (value == 7){
                  h.play();
              }else if (value == 8){
                  i.play();
              }else{
                  k.play();
              }
          
          } 



          var a = [];
          setInterval(getData, 1000) // run get Data function every 1 second
          //getData();

          
          async function getData(){
              const response = await fetch('../data/data.csv');
              const data = await response.text();
              //console.log(data);

              const rows = data.split('\n').slice(1);
              rows.forEach(elt => {
                  const row = elt.split(',');
                  const number = row[4];

                  a.push(number);
              //   console.log(a);   

              ///   console.log(row);
                  //console.log(number);
              ///  setGaugeValue(gaugeElement, number);
              });
             // console.log("this is number", a); // the var a must within the getDATA FUCNITON 
              var lastItem = a[a.length -2]; //choose the last number to display
              var previousItem = a[a.length -3];
              console.log("this is last item", lastItem);
              console.log("this is previous item", previousItem);
              setGaugeValue(gaugeElement, lastItem);
              previousGaugeValue(gaugeElement, previousItem);
              playAudio(lastItem); // run setGauge when eachtime get the data.
          //    setTimeout (setGaugeValue(gaugeElement, lastItem), 3000);
              /// console.log(rows);
          };

          



      </script>

 

        


  </body>
</html>